(function(){function o(a){return a.replace(/<[^>]*>?/gi,p)}function p(a){return a.match(q)||a.match(r)||a.match(s)?a:""}function t(a){if(a=="")return"";var l=/<\/?\w+[^>]*(\s|$|>)/g,d=a.toLowerCase().match(l),g=(d||[]).length;if(g==0)return a;for(var h,c,e,i=[],m=[],n=false,b=0;b<g;b++){h=d[b].replace(/<\/?(\w+).*/,"$1");if(!(i[b]||"<p><img><br><li><hr>".search("<"+h+">")>-1)){c=d[b];e=-1;if(!/^<\//.test(c))for(c=b+1;c<g;c++)if(!i[c]&&d[c]=="</"+h+">"){e=c;break}if(e==-1)n=m[b]=true;else i[e]=true}}if(!n)return a;
b=0;return a=a.replace(l,function(j){j=m[b]?"":j;b++;return j})}var f,k;if(typeof exports==="object"&&typeof require==="function"){f=exports;k=require("./Markdown.Converter").Converter}else{f=window.Markdown;k=f.Converter}f.getSanitizingConverter=function(){var a=new k;a.hooks.chain("postConversion",o);a.hooks.chain("postConversion",t);return a};var q=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,r=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,
s=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i})();
